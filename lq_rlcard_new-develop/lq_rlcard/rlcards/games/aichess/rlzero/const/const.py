# -*- coding: utf-8 -*-

import copy
import numpy as np

from collections import deque

# 使用列表表示棋盘，红方在上，黑方在下，使用时需要使用深拷贝
STATE_LIST_INIT = [
	['红车', '红马', '红象', '红士', '红帅', '红士', '红象', '红马', '红车'],
	['一一', '一一', '一一', '一一', '一一', '一一', '一一', '一一', '一一'],
	['一一', '红炮', '一一', '一一', '一一', '一一', '一一', '红炮', '一一'],
	['红兵', '一一', '红兵', '一一', '红兵', '一一', '红兵', '一一', '红兵'],
	['一一', '一一', '一一', '一一', '一一', '一一', '一一', '一一', '一一'],
	['一一', '一一', '一一', '一一', '一一', '一一', '一一', '一一', '一一'],
	['黑兵', '一一', '黑兵', '一一', '黑兵', '一一', '黑兵', '一一', '黑兵'],
	['一一', '黑炮', '一一', '一一', '一一', '一一', '一一', '黑炮', '一一'],
	['一一', '一一', '一一', '一一', '一一', '一一', '一一', '一一', '一一'],
	['黑车', '黑马', '黑象', '黑士', '黑帅', '黑士', '黑象', '黑马', '黑车']]

# deque来存储棋盘状态，长度为4
STATE_QUEUE_INIT = deque(maxlen=4)
for _ in range(4):
	STATE_QUEUE_INIT.append(copy.deepcopy(STATE_LIST_INIT))

# 相对位置字典
OPPOSITE_DICT = {
	'黑': '红',
	'红': '黑'
}

STATE_GUY_INIT = [
	'红车', '红马', '红马', '红车', '红炮', '红炮', '红兵', '红兵', '红兵', '红兵', '红兵',
	'黑兵', '黑兵', '黑兵', '黑兵', '黑兵', '黑炮', '黑炮', '黑车', '黑马', '黑马', '黑车']

# 构建字典 -> 字符串到数组的映射
# 函数 -> 数组到字符串的映射
STRING2ARRAY = dict(
	红车=np.array([1, 0, 0, 0, 0, 0, 0]),
	红马=np.array([0, 1, 0, 0, 0, 0, 0]),
	红象=np.array([0, 0, 1, 0, 0, 0, 0]),
	红士=np.array([0, 0, 0, 1, 0, 0, 0]),
	红帅=np.array([0, 0, 0, 0, 1, 0, 0]),
	红炮=np.array([0, 0, 0, 0, 0, 1, 0]),
	红兵=np.array([0, 0, 0, 0, 0, 0, 1]),
	黑车=np.array([-1, 0, 0, 0, 0, 0, 0]),
	黑马=np.array([0, -1, 0, 0, 0, 0, 0]),
	黑象=np.array([0, 0, -1, 0, 0, 0, 0]),
	黑士=np.array([0, 0, 0, -1, 0, 0, 0]),
	黑帅=np.array([0, 0, 0, 0, -1, 0, 0]),
	黑炮=np.array([0, 0, 0, 0, 0, -1, 0]),
	黑兵=np.array([0, 0, 0, 0, 0, 0, -1]),
	一一=np.array([0, 0, 0, 0, 0, 0, 0]))

# 象/相
BISHOP_DICT = {
	(2, 0): [['2002', [0, 2], [1, 1]], ['2042', [4, 2], [3, 1]]],
	(0, 2): [['0220', [2, 0], [1, 1]], ['0224', [2, 4], [1, 3]]],
	(4, 2): [['4220', [2, 0], [3, 1]], ['4224', [2, 4], [3, 3]]],
	(2, 4): [['2402', [0, 2], [1, 3]], ['2442', [4, 2], [3, 3]], ['2406', [0, 6], [1, 5]], ['2446', [4, 6], [3, 5]]],
	(0, 6): [['0624', [2, 4], [1, 5]], ['0628', [2, 8], [1, 7]]],
	(4, 6): [['4624', [2, 4], [3, 5]], ['4628', [2, 8], [3, 7]]],
	(2, 8): [['2806', [0, 6], [1, 7]], ['2846', [4, 6], [3, 7]]],
	(7, 0): [['7052', [5, 2], [6, 1]], ['7092', [9, 2], [8, 1]]],
	(5, 2): [['5270', [7, 0], [6, 1]], ['5274', [7, 4], [6, 3]]],
	(9, 2): [['9270', [7, 0], [8, 1]], ['9274', [7, 4], [8, 3]]],
	(7, 4): [['7452', [5, 2], [6, 3]], ['7492', [9, 2], [8, 3]], ['7456', [5, 6], [6, 5]], ['7496', [9, 6], [8, 5]]],
	(5, 6): [['5674', [7, 4], [6, 5]], ['5678', [7, 8], [6, 7]]],
	(9, 6): [['9674', [7, 4], [8, 5]], ['9678', [7, 8], [8, 7]]],
	(7, 8): [['7856', [5, 6], [6, 7]], ['7896', [9, 6], [8, 7]]]}

# 士/仕
SCHOLAR_DICT = {
	(0, 3): [['0314', [1, 4]]],
	(1, 4): [['1403', [0, 3]], ['1405', [0, 5]], ['1423', [2, 3]], ['1425', [2, 5]]],
	(2, 3): [['2314', [1, 4]]],
	(2, 5): [['2514', [1, 4]]],
	(9, 3): [['9384', [8, 4]]],
	(8, 4): [['8493', [9, 3]], ['8495', [9, 5]], ['8473', [7, 3]], ['8475', [7, 5]]],
	(9, 5): [['9584', [8, 4]]],
	(7, 3): [['7384', [8, 4]]],
	(7, 5): [['7584', [8, 4]]]}

# 将/帅
KING_DICT = {
	(0, 4): [['0414', [1, 4]], ['0403', [0, 3]], ['0405', [0, 5]]],
	(0, 3): [['0313', [1, 3]], ['0304', [0, 4]]],
	(0, 5): [['0515', [1, 5]], ['0504', [0, 4]]],
	(1, 4): [['1404', [0, 4]], ['1424', [2, 4]], ['1413', [1, 3]], ['1415', [1, 5]]],
	(1, 3): [['1303', [0, 3]], ['1323', [2, 3]], ['1314', [1, 4]]],
	(1, 5): [['1505', [0, 5]], ['1525', [2, 5]], ['1514', [1, 4]]],
	(2, 4): [['2414', [1, 4]], ['2423', [2, 3]], ['2425', [2, 5]]],
	(2, 3): [['2313', [1, 3]], ['2324', [2, 4]]],
	(2, 5): [['2515', [1, 5]], ['2524', [2, 4]]],
	(9, 4): [['9484', [8, 4]], ['9493', [9, 3]], ['9495', [9, 5]]],
	(9, 3): [['9383', [8, 3]], ['9394', [9, 4]]],
	(9, 5): [['9585', [8, 5]], ['9594', [9, 4]]],
	(8, 4): [['8474', [7, 4]], ['8494', [9, 4]], ['8483', [8, 3]], ['8485', [8, 5]]],
	(8, 3): [['8373', [7, 3]], ['8393', [9, 3]], ['8384', [8, 4]]],
	(8, 5): [['8575', [7, 5]], ['8595', [9, 5]], ['8584', [8, 4]]],
	(7, 4): [['7484', [8, 4]], ['7473', [7, 3]], ['7475', [7, 5]]],
	(7, 3): [['7383', [8, 3]], ['7374', [7, 4]]],
	(7, 5): [['7585', [8, 5]], ['7574', [7, 4]]]}

REPLACE_DICT_OLD = {
	'n': 'k',
	'N': 'K',
	'b': 'e',
	'B': 'E',
	'a': 'm',
	'A': 'M',
	'k': 's',
	'K': 'S',
	'r': 'r',
	'R': 'R',
	'p': 'p',
	'P': 'P',
	'c': 'c',
	'C': 'C',
}

REPLACE_DICT = {
	'红车': 'r', '红马': 'k', '红象': 'e', '红士': 'm', '红帅': 's', '一一': '', '红炮': 'c', '红兵': 'p',
	'黑兵': 'P', '黑炮': 'C', '黑车': 'R', '黑马': 'K', '黑象': 'E', '黑士': 'M', '黑帅': 'S'}

STATE_TO_BOARD_DICT = {
	'k': 'n',
	'K': 'N',
	'e': 'b',
	'E': 'B',
	'm': 'a',
	'M': 'A',
	's': 'k',
	'S': 'K',
	'r': 'r',
	'R': 'R',
	'p': 'p',
	'P': 'P',
	'c': 'c',
	'C': 'C',
}

BOARD_WIDTH = 9
BOARD_HEIGHT = 10

BOARD = [
	['r', 'n', 'b', 'a', 'k', 'a', 'b', 'n', 'r'],
	['.', '.', '.', '.', '.', '.', '.', '.', '.'],
	['.', 'c', '.', '.', '.', '.', '.', 'c', '.'],
	['p', '.', 'p', '.', 'p', '.', 'p', '.', 'p'],
	['.', '.', '.', '.', '.', '.', '.', '.', '.'],
	['.', '.', '.', '.', '.', '.', '.', '.', '.'],
	['P', '.', 'P', '.', 'P', '.', 'P', '.', 'P'],
	['.', 'C', '.', '.', '.', '.', '.', 'C', '.'],
	['.', '.', '.', '.', '.', '.', '.', '.', '.'],
	['R', 'N', 'B', 'A', 'K', 'A', 'B', 'N', 'R']]

BOARD1 = [
	['红车', '红马', '红象', '红士', '红帅', '红士', '红象', '红马', '红车'],
	['一一', '一一', '一一', '一一', '一一', '一一', '一一', '一一', '一一'],
	['一一', '红炮', '一一', '一一', '一一', '一一', '一一', '红炮', '一一'],
	['红兵', '一一', '红兵', '一一', '红兵', '一一', '红兵', '一一', '红兵'],
	['一一', '一一', '一一', '一一', '一一', '一一', '一一', '一一', '一一'],
	['一一', '一一', '一一', '一一', '一一', '一一', '一一', '一一', '一一'],
	['黑兵', '一一', '黑兵', '一一', '黑兵', '一一', '黑兵', '一一', '黑兵'],
	['一一', '黑炮', '一一', '一一', '一一', '一一', '一一', '黑炮', '一一'],
	['一一', '一一', '一一', '一一', '一一', '一一', '一一', '一一', '一一'],
	['黑车', '黑马', '黑象', '黑士', '黑帅', '黑士', '黑象', '黑马', '黑车']]