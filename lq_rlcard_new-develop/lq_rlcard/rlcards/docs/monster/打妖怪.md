# 打妖怪强化学习

1、游戏简介：打妖怪也称为西游记

    要求：满4人开始，打完一轮结算。
    1.玩家四人
    2.以西游记对于的四位角色命名循环出牌
    3.直到没有对应的角色牌出牌时，捡走目前已出的所有牌，到最后算分。

2、游戏用牌：

    1.数量：28张
    2.牌张：3,5,8,10,J,Q,K,红心、黑桃、梅花、方块各一张

3、游戏流程：

![image](https://alidocs.oss-cn-zhangjiakou.aliyuncs.com/res/ya2QnV9BrbVml4XB/img/d36c3aed-d7f3-4306-9e94-feca601ac4a2.png)

4、牌型大小：

    1.10 > 5 > 8 > 3 > K > Q > J
    2.妖怪牌(K、Q、J) > 10

5、开始规则：

    1.牌型大小中没有最大的牌，可持续循环。
    2.KQJ分别为大、中、小妖怪，5、8、3为悟空、八戒、沙僧，10为师傅(唐僧)
    3.师傅能大过徒弟牌，无法打妖怪牌
    
    举例：
    1.第一家J点(小妖怪)，则QK385均可出，10点师傅无法出
    2.如：出10点(师傅牌)，则只能妖怪牌可出，徒弟牌无法出

6、胜负规则：

    如没有能出的牌，只能捡牌，捡牌就为负分

7、计分规则：

    金豆计算：每一轮捡牌数量 x 场次底分
    捡牌数量 = 桌牌(全部玩家已出牌的数量)
    底分：场次底分
    
    积分是以前的只在整局游戏结束时才结算，现在是每次捡牌都会结算一次
    (捡牌 * (玩家数量-1) * 场次底分) = 扣除的豆子数量

8.流程分析：

    第1步：方块J出牌(J牌为最小妖怪)
    第2步：按游戏规则开始(根据牌型大小)进行游戏
    第3步：当该玩家要不起时，需要对打出的所有牌捡起来，向三位玩家金豆(每次捡牌都会计算金豆)
    第4步：谁捡牌，计算完金豆后，就是该捡牌玩家出牌
    第5步：谁先出完手牌，谁就是赢家
    第6步：一直继续下去，直到手牌全部出完

9.游戏流程：

    1. 在每一轮游戏中，首发(持有方块J)玩家必须打出一张牌
    
    2.另外首发下一位出牌玩家根据牌值决定是跟随还是“通过”：
    	2.1 如果跟随，需要打出的牌比上一位玩家出牌大，然后从手中删除这张牌
    	2.2 如果通过，那么自己需要捡起上一位玩家的出牌(上轮结束)，并将捡起的牌记录下来
    	2.3 下一轮出牌玩家也就是现在捡牌玩家，捡牌玩家随机出牌
    	2.4 补充：每次进行捡牌的玩家都需要对其他三位玩家发放捡牌的惩罚奖励
    
    也就是说，每一次捡牌，都会扣除强化学习道理的奖励作为惩罚
    
    3.第三位玩家根据牌值决定是跟随还是“通过”：
    	3.1 如果跟随，需要打出的牌比上一位玩家出牌大，然后从手中删除这张牌
    	3.2 如果通过，那么自己需要捡起上一位玩家的出牌(上轮结束)，并将捡起的牌记录下来
    	3.3 下一轮出牌玩家也就是现在捡牌玩家，捡牌玩家随机出牌
    
    4.第四位玩家根据牌值决定是跟随还是“通过”：
    	4.1 如果跟随，需要打出的牌比上一位玩家出牌大，然后从手中删除这张牌
    	4.2 如果通过，那么自己需要捡起上一位玩家的出牌(上轮结束)，并将捡起的牌记录下来
    	4.3 下一轮出牌玩家也就是现在捡牌玩家，捡牌玩家随机出牌
    
    5.一直重复2~4步骤
    
    6.谁先打完手牌谁为赢家(每人手牌7张)
    
    7.下一轮：找出持有(方块J)玩家，首发出牌
    
    8.重复 1~7步骤，一直进行游戏

10.玩家动作分析

    1.每一位玩家手牌只有(7张)，交互动作仅为(打牌/捡牌)
    
    # 判断玩家1，玩家2，玩家3，玩家4，接下来的操作
    while True:
      2.持有方块7玩家被视为地主，进行打牌动作时:
    		2.1 每次出牌，需要从手牌中减出掉的牌
      
      3.下一位玩家判断是否跟牌(出牌大于上家出牌)，或者不要:
      3.1 if 选择跟牌：
     					则从手牌删除这个牌
      3.2 if(/else) 不要:
        			1.捡起桌牌上所有的出牌，添加捡牌记录
          		continue
              2.以捡牌玩家为新的一轮，捡牌玩家继续出牌(随机)
              
             	3. break return 2
            
    4.一直循环打牌/捡牌，谁先出完，谁为赢家
    	4.1 直到每一位玩家手牌都为0时
    
    5.新的一局游戏开始，发牌
    6.回到: while True 打牌判断过程
    7.一直轮训1~6过程，直到满意结果
      
    # 改流程仅做分析 	

#### 参考

打出最高等级牌的玩家将在下一轮中率先出牌

游戏的目标是成为第一个摆脱手中所有牌的玩家